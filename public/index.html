<!doctype html>
<html lang="en">

<head>
    <!--<img src="..//images/earth3.gif">-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Time for Action!</title>
   

    <link rel="stylesheet" type="text/css" href="styles.css">
     <link rel="stylesheet" type="text/css" href="pie-chart.css">
</head>

<body>
    <header class="masthead">
        <h1 class="masthhead-heading">Let's Keep This Space Ship Spinning</h1>
    </header>

    <section class="introduction-section">
    <div class= "title_wrap">
         <h3>Time For Action!</h3>
    </div>
        
        
        <div class="text_wrap">
          <p class="intro">According to recent study's many scientists believe that by 2050 when the human population will hit 10 billion this beautiful planet of ours will no longer be able to sustain life at the current rate that it's recourses are currently being used. Fossil Fuels and
            Animal Agriculure are the two industries that are the most responsible for the depletion of the Earth's resources and the largest contributors to Green House Gases. By moving away from our dependence on these industries for food and fuel
            we will be able to reverse global warming and have the resourses to keep spinning a lot longer and further into space.</p>
        </div>

    </section>
   
    
    <div class="clockdiv_wrap">
      <h4>Count Down To 2050</h4>
      
    <div id ="clockdiv">
         Days: <span class="days"></span><br>
    Hours: <span class="hours"></span><br>
    Minutes: <span class="minutes"></span><br>
    Seconds: <span class="seconds"></span>
    </div>
    
    </div>


     <div class="item_data_wrap">


        <div class="co2">
            <header>CO2</header>
                <h2>Total Co2 Emissions A Year</h2>
                <form class="data-section">
                    <input id="all-items" type="text" placeholder="">
                    
                </form>
        </div>
         
        <!-- . item_wrap - -->
        
               <!--show_co2_data        -->
        <div class="data_results">
                    <ul></ul>
                    <p class="error"></p>
                 </div> 
                 
        <div class="green_house_gas">
                <h2>Total Green House Emissions A year</h2>
                <form class="data-section">
                    <input id="all-items" type="text" placeholder="">
                   
                </form>
        </div>
        
        <!-- . item_wrap - -->
        
               <!--show_ghg_data    -->
        <div class="data_results">
                    <ul></ul>
                    <p class="error"></p>
            
        </div>
        <div class="methane">
            <header>Total Methane</header>
                <h2>Total Methane Emissions A Year</h2>
                <form class="data-section">
                    <input id="all-items" type="text" placeholder="">
                   
                </form>
                
                <!--show_methane_data                -->
             <div class="data_results">
                    <ul></ul>
                    <p class="error"></p>
                </div>    
                 
        </div>
        
        <!-- . item_wrap - -->
    <!--</div>-->
    <!-- . list_wrap - -->
    
     <div class="chart_wrap_a"><img src="../images/global_emissions_sector_2015.png" /></div>
     
     <div class="chart_wrap_b"><img src="../images/livestock_pie_chart.jpg" /></div>
     
     
     
    <div class="iframe_wrap">
        
      <iframe width="600" height="513" frameborder="0" scrolling="no" src="https://www.climatecentral.org/wgts/EarthDay2015/map.html?utm_source=ext&utm_medium=embed&utm_campaign=EarthDay2015"></iframe> 
    </div>
    
     <div class="chart_wrap_c"><img src="../images/methane_pie_chart.jpg" /></div>
        
         <div class="chart_wrap_d"><img src="../images/meatcosts-pie-chart.png" /></div>
         
    <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="app.js"></script>
    <script src="server.js"></script>
    
     <script src="client.js"></script>
    
</body>


<!-- Handlebars templates -->
<script id="item_list_template" type="text/x-handlebars-template">
<ul class="item_list">
    {{#each items}}
    <li data-id="{{ id }}{{ _id }}">
        <div class="display">
            <span class="name">{{name}}</span>
        //     <div class="delete">
        //         <a href="#" class="delete-item" aria-label="Delete item">
        //             <i class="fa fa-times" aria-hidden="true"></i>
        //         </a>
        //     </div>
        // </div>
        // <form class="edit-item-form" hidden>
        //     <input type="text" name="edit-item-input"
        //         title="Edit item">
            
        // </form>
    </li>
    {{/each}}
</ul>
</script>

<!-- JS -->
<script src="https://code.jquery.com/jquery-2.1.0.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.js"></script>
<script>

var dataList = function() {
    this.items = [];
    this.itemList = $('.item-list');
    this.itemListTemplate = Handlebars.compile($("#item-list-template").html());
    // this.form = $('.add-item-form');
    this.form.submit(this.onAddItemSubmit.bind(this));
    this.input = $('#item-input');
    this.main = $('.main');
    // this.main.on('dblclick', 'li',
    //              this.onEditItemClicked.bind(this));
    // this.main.on('submit', '.edit-item-form',
    //              this.onEditItemSubmit.bind(this));
    // this.main.on('focusout', 'li input',
    //              this.onEditFocusOut.bind(this));
    // this.main.on('click', 'li .delete-item',
    //              this.onDeleteItemClicked.bind(this));
    // this.getItems();
};

dataList.prototype.onAddItemSubmit = function(event) {
    event.preventDefault();
    var value = this.input.val().trim();
    if (value != '') {
        this.addItem(value);
    }
    this.form[0].reset();
};

dataList.prototype.onEditItemClicked = function(event) {
    event.preventDefault();
    var item = $(event.target).parents('li');
    var display = item.children('.display');
    var form = item.children('form');
    var input = form.children('input');
    var name = display.children('.name');
    form.attr('hidden', null);
    input.focus();
    input.val(name.text());
    display.hide();
};

dataList.prototype.onEditItemSubmit = function(event) {
    event.preventDefault();
    var input = $(event.target).children('input');
    input.blur();
};

dataList.prototype.onEditFocusOut = function(event) {
    var item = $(event.target).parents('li');
    var id = item.data('id');
    var display = item.children('.display');
    var form = item.children('form');
    var input = form.children('input');
    var name = display.children('.name');
    var value = input.val().trim();
    if (value != '') {
        this.editItem(id, value);
        name.text(value);
    }
    form.attr('hidden', true);
    display.show();
    event.preventDefault();
};

dataList.prototype.onDeleteItemClicked = function(event) {
    var id = $(event.target).parents('li').data('id');
    this.deleteItem(id);
};

dataList.prototype.getItems = function() {
    var ajax = $.ajax('/items', {
        type: 'GET',
        dataType: 'json'
    });
    ajax.done(this.onGetItemsDone.bind(this));
};

dataList.prototype.addItem = function(name) {
    var item = {'name': name};
    var ajax = $.ajax('/items', {
        type: 'POST',
        data: JSON.stringify(item),
        dataType: 'json',
        contentType: 'application/json'
    });
    ajax.done(this.getItems.bind(this));
};

dataList.prototype.deleteItem = function(id) {
    var ajax = $.ajax('/items/' + id, {
        type: 'DELETE',
        dataType: 'json'
    });
    ajax.done(this.getItems.bind(this));
};

dataList.prototype.editItem = function(id, name) {
    var item = {'name': name, 'id': id};
    var ajax = $.ajax('/items/' + id, {
        type: 'PUT',
        data: JSON.stringify(item),
        dataType: 'json',
        contentType: 'application/json'
    });
    ajax.done(this.getItems.bind(this));
};

dataList.prototype.onGetItemsDone = function(items) {
    this.items = items;
    this.updateItemsView();
};

dataList.prototype.updateItemsView = function() {
    var context = {
        items: this.items
    };
    var data_results = $(this.item_results_template(context));
    this.data_results = replaceWith(items_resultsList);
    this.data_results = item_results;
};

$(document).ready(function() {
    var app = new dataList();
});
</script>

</html>